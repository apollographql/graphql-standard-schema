{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "A query that fetches users and does a search",
  "type": "object",
  "title": "query GetUsers",
  "properties": {
    "users": {
      "title": "Query.users: [User]",
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/type/User",
        "type": [
          "object",
          "null"
        ],
        "title": "User",
        "properties": {
          "__typename": {
            "const": "User"
          },
          "id": {
            "title": "User.id: Int!",
            "type": "integer"
          },
          "name": {
            "title": "User.name: String!",
            "type": "string"
          },
          "role": {
            "title": "User.role: Role",
            "anyOf": [
              {
                "$ref": "#/$defs/enum/Role"
              },
              {
                "type": "null"
              }
            ]
          },
          "birthDate": {
            "title": "User.birthDate: Date",
            "anyOf": [
              {
                "$ref": "#/$defs/scalar/Date"
              },
              {
                "type": "null"
              }
            ]
          },
          "favourites": {
            "title": "User.favourites: [Favourite!]!",
            "type": "array",
            "items": {
              "$ref": "#/$defs/type/Favourite",
              "anyOf": [
                {
                  "$ref": "#/$defs/type/Book",
                  "type": "object",
                  "title": "Book",
                  "properties": {
                    "__typename": {
                      "const": "Book"
                    },
                    "name": {
                      "title": "Book.name: String!",
                      "type": "string"
                    },
                    "author": {
                      "title": "Book.author: String!",
                      "type": "string"
                    }
                  },
                  "required": [
                    "__typename",
                    "name",
                    "author"
                  ]
                }
              ]
            }
          }
        },
        "required": [
          "__typename",
          "id",
          "name",
          "favourites"
        ]
      }
    },
    "search": {
      "title": "Query.search: [SearchResult!]!",
      "type": "array",
      "items": {
        "$ref": "#/$defs/type/SearchResult",
        "anyOf": [
          {
            "$ref": "#/$defs/type/User",
            "type": "object",
            "title": "User",
            "properties": {
              "__typename": {
                "const": "User"
              },
              "name": {
                "title": "User.name: String!",
                "type": "string"
              }
            },
            "required": [
              "__typename",
              "name"
            ]
          },
          {
            "$ref": "#/$defs/type/Book",
            "type": "object",
            "title": "Book",
            "properties": {
              "__typename": {
                "const": "Book"
              },
              "id": {
                "title": "Book.id: ID!",
                "type": "string"
              },
              "name": {
                "title": "Book.name: String!",
                "type": "string"
              },
              "author": {
                "title": "Book.author: String!",
                "type": "string"
              }
            },
            "required": [
              "__typename",
              "id",
              "name",
              "author"
            ]
          },
          {
            "$ref": "#/$defs/type/Color",
            "type": "object",
            "title": "Color",
            "properties": {
              "__typename": {
                "const": "Color"
              },
              "name": {
                "title": "Color.name: String!",
                "type": "string"
              },
              "hex": {
                "title": "Color.hex: String!",
                "type": "string"
              }
            },
            "required": [
              "__typename",
              "name",
              "hex"
            ]
          }
        ]
      }
    }
  },
  "required": [
    "search"
  ],
  "$defs": {
    "enum": {
      "Role": {
        "title": "Role",
        "description": "System user roles",
        "enum": [
          null,
          "ADMIN",
          "USER",
          "GUEST"
        ]
      }
    },
    "scalar": {
      "Date": {
        "title": "Date",
        "description": "A date string in YYYY-MM-DD format",
        "type": "string",
        "pattern": "\\d{4}-\\d{1,2}-\\d{1,2}"
      }
    },
    "type": {
      "Book": {
        "description": "A book"
      },
      "Favourite": {
        "description": "Describes something that can be a 'favourite thing or concept'"
      },
      "User": {
        "description": "The user type"
      },
      "Color": {
        "description": "A color"
      },
      "SearchResult": {
        "description": "A possible search result for the Omnibar"
      }
    }
  }
}